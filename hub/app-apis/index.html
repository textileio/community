



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Textile makes it easy for you or your application to store and distribute data over the IPFS network.">
      
      
        <link rel="canonical" href="https://docs.textile.io/hub/app-apis/">
      
      
        <meta name="author" content="textile.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.1.0">
    
    
      
        <title>App APIs | Documentation | Textile</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.86c34351.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/textile.css">
    
    <script src="https://cdn.usefathom.com/3.js" site="TEBMKXIY"></script>
    <script>
        window.fathom || document.write('<script src="https://grouse.textile.io/core.js"><\/script>');
    </script>
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="default" data-md-color-accent="default">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#getting-started" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.textile.io/" title="Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/hex.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Documentation
            </span>
            <span class="md-header-nav__topic">
              App APIs
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/textileio/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    textileio/docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.textile.io/" title="Documentation" class="md-nav__button md-logo">
      
        <img src="../../images/hex.svg" width="48" height="48">
      
    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/textileio/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    textileio/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" target="" class="md-nav__link ">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      The Hub
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        The Hub
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../accounts/" title="Accounts" target="" class="md-nav__link ">
      Accounts
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        App APIs
      </label>
    
    <a href="./" title="App APIs" class="md-nav__link md-nav__link--active">
      App APIs
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-access" title="API Access" class="md-nav__link">
    API Access
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#account-key" title="Account Key" class="md-nav__link">
    Account Key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-group-key" title="User Group Key" class="md-nav__link">
    User Group Key
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-user-group-keys" title="Creating User Group keys" class="md-nav__link">
    Creating User Group keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-signing-user-group-keys" title="Non-signing User Group keys" class="md-nav__link">
    Non-signing User Group keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-user-group-keys" title="Updating User Group keys" class="md-nav__link">
    Updating User Group keys
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app-apis" title="App APIs" class="md-nav__link">
    App APIs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buckets" title="Buckets" class="md-nav__link">
    Buckets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threaddb" title="ThreadDB" class="md-nav__link">
    ThreadDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-ownership" title="Data Ownership" class="md-nav__link">
    Data Ownership
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identity" title="Identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-user-owned-database" title="Example: User Owned Database" class="md-nav__link">
    Example: User Owned Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-identity-token" title="Prepare Identity &amp; Token" class="md-nav__link">
    Prepare Identity &amp; Token
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-authorization" title="User authorization" class="md-nav__link">
    User authorization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-threaddb" title="Setup ThreadDB" class="md-nav__link">
    Setup ThreadDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-from-our-collection" title="Query from our Collection" class="md-nav__link">
    Query from our Collection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" title="Libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Hub CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Hub CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub/" title="Overview" target="" class="md-nav__link ">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_login/" title="Login" target="" class="md-nav__link ">
      Login
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_logout/" title="Logout" target="" class="md-nav__link ">
      Logout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_whoami/" title="Whoami" target="" class="md-nav__link ">
      Whoami
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_orgs/" title="Orgs" target="" class="md-nav__link ">
      Orgs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck/" title="Bucket" target="" class="md-nav__link ">
      Bucket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_threads/" title="Threads" target="" class="md-nav__link ">
      Threads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_keys/" title="API Keys" target="" class="md-nav__link ">
      API Keys
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-hub/docs/" title="JavaScript" target="_blank" class="md-nav__link _blank">
      JavaScript
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Buckets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Buckets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../buckets/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Buckets CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Buckets CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck/" title="Overview" target="" class="md-nav__link ">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_add/" title="Add" target="" class="md-nav__link ">
      Add
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_archive/" title="Archive" target="" class="md-nav__link ">
      Archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_cat/" title="Cat" target="" class="md-nav__link ">
      Cat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_destroy/" title="Destroy" target="" class="md-nav__link ">
      Destroy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_init/" title="Init" target="" class="md-nav__link ">
      Init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_links/" title="Links" target="" class="md-nav__link ">
      Links
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_ls/" title="Ls" target="" class="md-nav__link ">
      Ls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_pull/" title="Pull" target="" class="md-nav__link ">
      Pull
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_push/" title="Push" target="" class="md-nav__link ">
      Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_root/" title="Root" target="" class="md-nav__link ">
      Root
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/hub_buck_status/" title="Status" target="" class="md-nav__link ">
      Status
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-hub/docs/hub.buckets" title="JavaScript" target="_blank" class="md-nav__link _blank">
      JavaScript
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      ThreadDB
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        ThreadDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../threads/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://godoc.org/github.com/textileio/go-threads/api/client" title="Golang" target="_blank" class="md-nav__link _blank">
      Golang
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-hub/docs/hub.client" title="JavaScript Client" target="_blank" class="md-nav__link _blank">
      JavaScript Client
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-threads/modules/_textile_threads_database.html" title="JavaScript Database" target="_blank" class="md-nav__link _blank">
      JavaScript Database
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Powergate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Powergate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/localnet/" title="Localnet" target="" class="md-nav__link ">
      Localnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/testnet/" title="Testnet" target="" class="md-nav__link ">
      Testnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Store Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Store Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/ffs/" title="Intro to FFS" target="" class="md-nav__link ">
      Intro to FFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cidconfig/" title="Storage Configs" target="" class="md-nav__link ">
      Storage Configs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      POW CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        POW CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow/" title="Overview" target="" class="md-nav__link ">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_ffs/" title="FFS" target="" class="md-nav__link ">
      FFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_asks/" title="Asks" target="" class="md-nav__link ">
      Asks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_deals/" title="Deals" target="" class="md-nav__link ">
      Deals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_faults/" title="Faults" target="" class="md-nav__link ">
      Faults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_miners/" title="Miners" target="" class="md-nav__link ">
      Miners
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_net/" title="Net" target="" class="md-nav__link ">
      Net
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_reputation/" title="Reputation" target="" class="md-nav__link ">
      Reputation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_wallet/" title="Wallet" target="" class="md-nav__link ">
      Wallet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../powergate/cli/pow_health/" title="Health" target="" class="md-nav__link ">
      Health
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-powergate-client/" title="JavaScript" target="_blank" class="md-nav__link _blank">
      JavaScript
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://godoc.org/github.com/textileio/powergate/api/client" title="Golang" target="_blank" class="md-nav__link _blank">
      Golang
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      Build Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-1">
        Build Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hub/web-app/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hub/libp2p-identities/" title="User identity" target="" class="md-nav__link ">
      User identity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hub/development-mode/" title="Development mode" target="" class="md-nav__link ">
      Development mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hub/user-buckets/" title="Add images to Buckets" target="" class="md-nav__link ">
      Add images to Buckets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hub/user-thread-database/" title="Chat rooms in Threads" target="" class="md-nav__link ">
      Chat rooms in Threads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/react-native-buckets/" title="Mobile threads & buckets" target="" class="md-nav__link ">
      Mobile threads & buckets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hub/production-auth/" title="Authentication" target="" class="md-nav__link ">
      Authentication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/static-websites/" title="Host Websites" target="" class="md-nav__link ">
      Host Websites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/golang/getting-started/" title="Getting started with Golang" target="" class="md-nav__link ">
      Getting started with Golang
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      ThreadDB
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        ThreadDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/bucket-photo-gallery" title="User Galleries in Buckets" target="_blank" class="md-nav__link _blank">
      User Galleries in Buckets
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/hub-threaddb-chat" title="Chat in Local Database" target="_blank" class="md-nav__link _blank">
      Chat in Local Database
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/hub-browser-auth-app" title="Server-side Authentication" target="_blank" class="md-nav__link _blank">
      Server-side Authentication
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/react-native-hub-app" title="Threads from React Native (JavaScript)" target="_blank" class="md-nav__link _blank">
      Threads from React Native (JavaScript)
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/go-threads/blob/master/examples/chat/main.go" title="Chat App (Golang)" target="_blank" class="md-nav__link _blank">
      Chat App (Golang)
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/go-threads/tree/master/examples/local_eventstore" title="Event Store (Golang)" target="_blank" class="md-nav__link _blank">
      Event Store (Golang)
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/go-threads/tree/master/examples/e2e_counter" title="P2P Counter (Golang)" target="_blank" class="md-nav__link _blank">
      P2P Counter (Golang)
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Buckets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Buckets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/react-native-hub-app" title="Buckets from React Native (JavaScript)" target="_blank" class="md-nav__link _blank">
      Buckets from React Native (JavaScript)
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-access" title="API Access" class="md-nav__link">
    API Access
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#account-key" title="Account Key" class="md-nav__link">
    Account Key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-group-key" title="User Group Key" class="md-nav__link">
    User Group Key
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-user-group-keys" title="Creating User Group keys" class="md-nav__link">
    Creating User Group keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-signing-user-group-keys" title="Non-signing User Group keys" class="md-nav__link">
    Non-signing User Group keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-user-group-keys" title="Updating User Group keys" class="md-nav__link">
    Updating User Group keys
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app-apis" title="App APIs" class="md-nav__link">
    App APIs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buckets" title="Buckets" class="md-nav__link">
    Buckets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threaddb" title="ThreadDB" class="md-nav__link">
    ThreadDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-ownership" title="Data Ownership" class="md-nav__link">
    Data Ownership
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identity" title="Identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-user-owned-database" title="Example: User Owned Database" class="md-nav__link">
    Example: User Owned Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-identity-token" title="Prepare Identity &amp; Token" class="md-nav__link">
    Prepare Identity &amp; Token
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-authorization" title="User authorization" class="md-nav__link">
    User authorization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-threaddb" title="Setup ThreadDB" class="md-nav__link">
    Setup ThreadDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-from-our-collection" title="Query from our Collection" class="md-nav__link">
    Query from our Collection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" title="Libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">

            <article class="md-content__inner md-typeset">
              
                
                
                  <a href="https://github.com/textileio/docs/edit/master/docs/hub/app-apis.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h1>
<p>Use the Hub to help scale your applications on IPFS. The Hub APIs are available for your apps and your app users. You can use the Hub APIs with a privileged <a href="#account-key">Account API Key</a> or with a <a href="#user-group-key">User Group Key</a>. Both have the ability to push new data to Buckets, persist ThreadDB data, and relay ThreadDB updates (among other things). Attaching the Hub to your users' data will allow you to deliver high-quality user-experiences. In order to make this as straightforward as possible, you need to understand a few additional basic concepts.</p>
<p><center></p>
<table>
<thead>
<tr>
<th></th>
<th align="center">Owner</th>
<th align="center">CLI</th>
<th align="center">Account Key</th>
<th align="center">User Group Key</th>
</tr>
</thead>
<tbody>
<tr>
<td>Developer Threads</td>
<td align="center">Hub Login</td>
<td align="center">create, access</td>
<td align="center">create, access</td>
<td align="center"></td>
</tr>
<tr>
<td>Developer Buckets</td>
<td align="center">Hub Login</td>
<td align="center">create, access</td>
<td align="center">create, access</td>
<td align="center"></td>
</tr>
<tr>
<td>Organization Threads</td>
<td align="center">Hub Login</td>
<td align="center">create, access</td>
<td align="center">create, access</td>
<td align="center"></td>
</tr>
<tr>
<td>Organization Buckets</td>
<td align="center">Hub Login</td>
<td align="center">create, access</td>
<td align="center">create, access</td>
<td align="center"></td>
</tr>
<tr>
<td>App User Threads</td>
<td align="center">PKI Identity</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">create, access</td>
</tr>
<tr>
<td>App User Buckets</td>
<td align="center">PKI Identity</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">create, access</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>The above table gives an overview of the different roles that can create or manage Threads and Buckets. In short, there are developer identities on the Hub and then a developer's app users represented as <a href="#identity">private-key identities</a> originating in their app. Each can use resources on the Hub, and below we will walk through the details of each.</p>
<h2 id="api-access">API Access<a class="headerlink" href="#api-access" title="Permanent link">&para;</a></h2>
<p><img alt="" src="../../images/hub-cli/hub_keys_create.png" /></p>
<h3 id="account-key">Account Key<a class="headerlink" href="#account-key" title="Permanent link">&para;</a></h3>
<p>Account keys provide direct access to developer and org account Buckets and Threads. Account keys make it possible to build apps that have full access to developer or organization Buckets. You can use account keys to integrate your Buckets into CI, dashboards, team messaging integration, etc. To create a new Account Key using <code>hub key create</code> and selecting the <code>account</code> option.</p>
<p><em><a href="../cli/hub_keys/">See CLI options</a></em></p>
<h3 id="user-group-key">User Group Key<a class="headerlink" href="#user-group-key" title="Permanent link">&para;</a></h3>
<p>User groups are non-admin groups of users (e.g. app users or beta users) that you want to provide restricted access to your Hub APIs. For each user group you want, you create a single <em>user group key</em> that will be used by all members of the group to access your API endpoint (developer or organization). For example, your app can create Buckets and Threads on behalf of your user that they sign on device with their own identity.</p>
<h4 id="creating-user-group-keys">Creating User Group keys<a class="headerlink" href="#creating-user-group-keys" title="Permanent link">&para;</a></h4>
<p>To create a new <em>user group key</em> using <code>hub key create</code> and selecting the <code>user group</code> option. If you are buiding an app in an organization, use <code>hub key create --org=&lt;name&gt;</code> to link a new key to the organization not your personal account. There is currently no migration tools, so we recommend creating a new organization or using an existing organization when starting a new app (see <a href="../accounts/">Organizations</a>)</p>
<h4 id="non-signing-user-group-keys">Non-signing User Group keys<a class="headerlink" href="#non-signing-user-group-keys" title="Permanent link">&para;</a></h4>
<p>You can use insecure keys with the API by creating non-signing keys. These keys are meant to use during development only. Read the tutorial on <a href="../../tutorials/hub/development-mode/">development mode</a> to use these keys.</p>
<h4 id="updating-user-group-keys">Updating User Group keys<a class="headerlink" href="#updating-user-group-keys" title="Permanent link">&para;</a></h4>
<p>You can replace your keys in your app at any time and the user will still have access to their Threads and Buckets as long as the key is connected to the same developer or organization. If you fully delete your account or organization, data replicated on IPFS through the <em>user group key</em> will <strong>also be removed</strong>. So if you remove your account, we highly encourage you to replicate the data on an external IPFS node, provide tools for your users to export or replicate their own account data, or host external Thread Services to migrate your user Thread replication to.</p>
<p>Also see <a href="../../tutorials/hub/libp2p-identities/">Identity tutorial</a> and how to use identity providers such as 3Box with user group keys.</p>
<p><em><a href="../cli/hub_keys/">See CLI commands</a></em></p>
<h2 id="app-apis">App APIs<a class="headerlink" href="#app-apis" title="Permanent link">&para;</a></h2>
<h3 id="buckets">Buckets<a class="headerlink" href="#buckets" title="Permanent link">&para;</a></h3>
<p><a href="../../buckets/">Buckets</a> provide S3-like data storage on IPFS. Just as you can create Buckets with the <a href="../cli/hub/">Hub CLI</a>, you can create Buckets using JavaScript with <a href="#libraries">js-hub</a>.</p>
<p>The <a href="#libraries">js-hub</a> library allows you to create and edit Buckets owned by you or your organization using an <a href="#account-key">account key</a>. Alternatively, you can use Buckets to store your user's data using a <a href="#user-group-key">user group key</a>.</p>
<h3 id="threaddb">ThreadDB<a class="headerlink" href="#threaddb" title="Permanent link">&para;</a></h3>
<p><a href="../../threads/">ThreadDB</a> is a mongo-like database that runs on IPFS. You can use it in combination with <a href="#libraries">js-hub</a> to add replication and relay to your user's databases. When combined, <code>js-threads</code> and <code>js-hub</code> allow you to embed private, p2p databases in your app that use remote IPFS peers for pinning and remote ThreadDB peers to relay updates to all parties. This configuration will help you scale your app and offer the highest quality experience to your users.</p>
<h3 id="data-ownership">Data Ownership<a class="headerlink" href="#data-ownership" title="Permanent link">&para;</a></h3>
<p>The databases and buckets you create over the APIs are owned in one of three ways.</p>
<ol>
<li>Developer owned. If you use an account key with the Buckets or ThreadDB APIs, the data will be linked directly to your account.</li>
<li>Org owned. If you create an account key using the --org flag, the Buckets and Threads will be linked to the organization.</li>
<li>User owned. If you create a user group key, Textile allows your app to provision new Buckets and Threads on behalf of your users. This data will be signed and owned by your end-users and only accessible to them. </li>
</ol>
<p>Developers can specify the <em>context</em> to customize exactly <em>how</em> resources (e.g., storage, networking, etc) are used/allocated within their own apps, and which of the three above ownership strategies are applied. This Conext API allows a developer to shift what role they are using to access the remote Hub APIs. This is interesting because a developer is able to access Hub resources as themselves (i.e., the developer), with all the administrative capabilities that entails, or as users of their app, which are sandboxed but able to create Threads (and Buckets) of their own <em>within</em> that user-scoped sandbox.</p>
<p>This is a very powerful framework for accessing and allocating developer resources on behalf of users, while still providing the control and quality user-experience that apps built on Threads should provide.</p>
<h3 id="identity">Identity<a class="headerlink" href="#identity" title="Permanent link">&para;</a></h3>
<p>Related to data ownership is the concept of identity. Textile's Hub and Buckets/ThreadDB APIs are flexible when it comes to user identity, allowing you to handle user identities (for access control and security/encryption) in the best way for your app and your users. In order to handle <em>multiple</em> peers collaborating on a single database, as well as the ability to handle storage <em>on behalf</em> of a user, Hub APIs expect a simple Identity interface for singing and validating updates.</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span> <span class="nx">Public</span> <span class="p">{</span>
  <span class="nx">verify</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">Buffer</span><span class="p">,</span> <span class="nx">sig</span>: <span class="kt">Buffer</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Identity</span> <span class="p">{</span>
  <span class="nx">sign</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">Buffer</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="nx">Buffer</span><span class="o">&gt;</span>
  <span class="kr">public</span><span class="o">:</span> <span class="nx">Public</span>
<span class="p">}</span>
</code></pre></div>

<p>Identity here represents any entity capable of signing a message. This is a simple <a href="https://en.wikipedia.org/wiki/Public_key_infrastructure">public key infrastructure</a> inspired interface that similarly requires the implementer to be capable of returning an associated public key for verification. In many cases, the Identity will just be a private key, but callers can use any setup that suits their needs. A default implementation based on <a href="https://github.com/libp2p/js-libp2p-crypto/blob/master/src/index.d.ts#L82">Libp2p's crypto library</a> is provided for convinience (and is also used by default if no identity is provided), however, many developers will want to use alternative identity provides, such as <a href="https://www.ceramic.network">3box/Ceramic</a>, <a href="https://fortmatic.com">Fortmatic</a>, and existing private/public keypair, or a web3 provider such as <a href="https://metamask.io">Metamask</a>. Textile Hub also provides email-based identities.</p>
<p>Identities also provide a way for developers to allocate resources (i.e., storage) for a particular user, and in fact, is a key component in ensuring that a user <em>controls their own data</em>.</p>
<h3 id="example-user-owned-database">Example: User Owned Database<a class="headerlink" href="#example-user-owned-database" title="Permanent link">&para;</a></h3>
<p>To illustrate the utility of Identity and Context, in the following example, we will create a user owned ThreadDB within a "user context". This should provide a useful example for getting started with Textile's Hub APIs in the context of a database. We'll also interact with our remote database using the Threads Client library (see also additional examples using the <a href="https://github.com/textileio/js-threads/tree/master/packages/database">local-first database</a> in the <a href="https://docs.textile.io/threads/">ThreadDB introduction</a>).</p>
<p>To get started with Textile's Context API, follow the instructions in our <a href="https://docs.textile.io/hub/">getting started guide</a>. Once you have downloaded and installed the command-line tools, be sure to create a developer account.</p>
<p>Next, create a new <code>user</code> key using <code>hub key create</code> command line tool. After some steps to create an account, you can create the keys.</p>
<div class="highlight"><pre><span></span><code>âžœ hub key create <span class="c1"># select the &#39;user&#39; option</span>
</code></pre></div>

<p>This should produce output similar to the following. Make note of these values, but do not share them! For a Node app, it is a good idea to use a tool such as <a href="https://github.com/motdotla/dotenv">dotenv</a> to reference them in your apps, which is what we will assume below. So create a simple <code>.env</code> file with <code>USER_API_KEY</code> and <code>USER_API_SECRET</code> keys.</p>
<div class="highlight"><pre><span></span><code>âœ” user

  KEY                          SECRET                          TYPE  
  bqab5csdh...no6jjezox4       bm2tk476yivwlw...3a4cayll7ztha  user  

&gt; Success! Created new API key and secret
</code></pre></div>

<p>Once you have the key information handy, let's jump to some code. We'll start with the required imports, and initialize a basic default <code>Context</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Libp2pCryptoIdentity</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads-core&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">config</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;dotenv&#39;</span>

<span class="c1">// Load your .env into process.env</span>
<span class="kr">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">config</span><span class="p">()</span>
</code></pre></div>

<h3 id="prepare-identity-token">Prepare Identity &amp; Token<a class="headerlink" href="#prepare-identity-token" title="Permanent link">&para;</a></h3>
<p>You can create a basic identity for our user, using the <code>Libp2pCryptoIdentity</code> object. In practice, you might have your own identity provider, or you might want to use a hierarchical key/wallet or mnemonic phrase to help store a users keys for them. Whatever you decide, Textile's generic identity interface should be able to support it.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Libp2pCryptoIdentity</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads-core&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">example</span> <span class="p">()</span> <span class="p">{</span>
   <span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Libp2pCryptoIdentity</span><span class="p">.</span><span class="nx">fromRandom</span><span class="p">()</span> <span class="c1">// Random identity</span>
   <span class="k">return</span> <span class="nx">identity</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="user-authorization">User authorization<a class="headerlink" href="#user-authorization" title="Permanent link">&para;</a></h4>
<p>This step is only necessary if you are using production (signing required) API keys. If you are in <a href="../../tutorials/hub/development-mode/">development mode</a>, you don't need to do this step. </p>
<p>Authorizing the user with your <em>user group key</em> and Secret will allow the user to store threads and buckets using your developer resources on the Hub. If you are running in development mode and created a key that doesn't require signing.</p>
<p>Read more about setting up authentication and authorization in <a href="../../tutorials/hub/production-auth/">production mode</a>.</p>
<h3 id="setup-threaddb">Setup ThreadDB<a class="headerlink" href="#setup-threaddb" title="Permanent link">&para;</a></h3>
<p>Now we will connect to our remote ThreadDB client. This will allow us to connect to a remote ThreadDB on the Textile Hub. This is an alternative to a local-first database where keys and data are stored <em>locally</em> on the device.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">UserAuth</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">start</span> <span class="p">(</span><span class="nx">auth</span>: <span class="kt">UserAuth</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">Client</span><span class="p">.</span><span class="nx">withUserAuth</span><span class="p">(</span><span class="nx">auth</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>With the ThreadDB instance ready to connect to the remote database, it is time to generate a user token. This allows us (the developer) to allocate user-scoped resources without our remote database. The app user (defined by their Identity created above) needs an API token to perform database operations. The API will give you one based on ID plus your developer credentials. The token will be added to the existing <code>client</code> session. The token can also be stored/cached for future use by the same user identity (and then manually be added to a context later).</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">Identity</span><span class="p">,</span> <span class="nx">UserAuth</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">startWithCallback</span> <span class="p">(</span><span class="nx">callback</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="nx">UserAuth</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">Client</span><span class="p">.</span><span class="nx">withUserAuth</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">client</span>
<span class="p">}</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">setToken</span><span class="p">(</span><span class="nx">client</span>: <span class="kt">Client</span><span class="p">,</span> <span class="nx">identity</span>: <span class="kt">Identity</span><span class="p">)</span> <span class="p">{</span>
   <span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getToken</span><span class="p">(</span><span class="nx">identity</span><span class="p">)</span>
   <span class="k">return</span> <span class="nx">token</span>
<span class="p">}</span>
</code></pre></div>

<p><em>Note that this operation updates the database's context in place, meaning all future requests will leverage the token.</em></p>
<p>An app should create a minimal number of Threads per user to avoid creating unnecessary storage. A single Thread can contain a large number of distinct Collections for different types of data. Here, we create a new Thread for a user, but you could similarly store this ThreadID in (say) a local database or your app state and restore it using <code>ThreadID.fromString()</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">ThreadID</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">openDB</span> <span class="p">(</span><span class="nx">client</span>: <span class="kt">Client</span><span class="p">,</span> <span class="nx">threadId</span>: <span class="kt">ThreadID</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">threadId</span><span class="p">)</span> <span class="c1">// Updates the context to include the thread id for all future calls</span>
<span class="p">}</span>
</code></pre></div>

<p>For this example, we're going to be working with a Collection of Astronauts. The schema looks like this.</p>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">astronautSchema</span> <span class="o">=</span> <span class="p">{</span>
   <span class="nx">$id</span><span class="o">:</span> <span class="s1">&#39;https://example.com/astronaut.schema.json&#39;</span><span class="p">,</span>
   <span class="nx">$schema</span><span class="o">:</span> <span class="s1">&#39;http://json-schema.org/draft-07/schema#&#39;</span><span class="p">,</span>
   <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span>
   <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
   <span class="nx">required</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;_id&#39;</span><span class="p">],</span>
   <span class="nx">properties</span><span class="o">:</span> <span class="p">{</span>
     <span class="nx">_id</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
     <span class="p">},</span>
     <span class="nx">firstName</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
     <span class="p">},</span>
     <span class="nx">lastName</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
     <span class="p">},</span>
     <span class="nx">missions</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
       <span class="nx">minimum</span>: <span class="kt">0</span><span class="p">,</span>
     <span class="p">},</span>
   <span class="p">},</span>
 <span class="p">}</span>
 <span class="sb">```</span>

<span class="sb"> Using that schema, we&#39;ll create a new collection. See [our ThreadDB introduction](https://docs.textile.io/threads/) for details about Collections, Schemas, and Instances.</span>

<span class="sb"> ```</span><span class="nx">typescript</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">ThreadID</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>

<span class="c1">// Provide the astronautSchema here.</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">example</span> <span class="p">(</span><span class="nx">client</span>: <span class="kt">Client</span><span class="p">,</span> <span class="nx">threadId</span>: <span class="kt">ThreadID</span><span class="p">,</span> <span class="nx">schema</span>: <span class="kt">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">newCollection</span><span class="p">(</span><span class="nx">threadId</span><span class="p">,</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">schema</span><span class="p">)</span>
<span class="p">}</span>
 <span class="sb">```</span>

<span class="sb"> ### Add Instance to Collection</span>

<span class="sb">Now that our ThreadDB contains the Astronaut Collection, you just need to add a new astronaut that matches the expected schema. If you run the following code many times, you&#39;ll notice many Buzz Aldrin entries in your ThreadDB, each with a unique ID.</span>

<span class="sb">```</span><span class="nx">typescript</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">ThreadID</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">example</span> <span class="p">(</span><span class="nx">client</span>: <span class="kt">Client</span><span class="p">,</span> <span class="nx">threadId</span>: <span class="kt">ThreadID</span><span class="p">)</span> <span class="p">{</span>
   <span class="kr">const</span> <span class="nx">ids</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">threadId</span><span class="p">,</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="p">[</span>
     <span class="p">{</span>
       <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// Leave empty to auto-generate</span>
       <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Buzz&#39;</span><span class="p">,</span>
       <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Aldrin&#39;</span><span class="p">,</span>
       <span class="nx">missions</span>: <span class="kt">2</span><span class="p">,</span>
     <span class="p">}</span>
   <span class="p">])</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="query-from-our-collection">Query from our Collection<a class="headerlink" href="#query-from-our-collection" title="Permanent link">&para;</a></h3>
<p>You can search all your existing Buzz Aldrins pretty easily. You can also clean up our entries (just delete them all!), modify them, or perform various transactions.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">ThreadID</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/hub&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Where</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">example</span> <span class="p">(</span><span class="nx">client</span>: <span class="kt">Client</span><span class="p">,</span> <span class="nx">threadId</span>: <span class="kt">ThreadID</span><span class="p">)</span> <span class="p">{</span>
   <span class="kr">const</span> <span class="nx">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Where</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;Buzz&#39;</span><span class="p">)</span>
   <span class="kr">const</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">threadId</span><span class="p">,</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">q</span><span class="p">)</span>
   <span class="c1">// Extract just the ids</span>
   <span class="kr">const</span> <span class="nx">ids</span> <span class="o">=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">instancesList</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">instance</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span>

   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Found </span><span class="si">${</span><span class="nx">ids</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> entries`</span><span class="p">)</span>

   <span class="c1">// Cleanup!</span>
   <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">threadId</span><span class="p">,</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">ids</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>We leave the remaining operations as an exercise for the reader. Have fun, explore, and let us know what you think!</p>
<h2 id="libraries">Libraries<a class="headerlink" href="#libraries" title="Permanent link">&para;</a></h2>
<p>You can find all remote Thread and Bucket APIs in the <code>textile</code> libraries below. These libraries are meant to work in combination with the <code>threads</code> libraries when you want to create and manage Threads database in your app. </p>
<p>Here are the libraries you will find useful to start building today.</p>
<table>
<thead>
<tr>
<th></th>
<th align="center">ThreadDB</th>
<th align="center">Threads APIs &amp; Buckets</th>
</tr>
</thead>
<tbody>
<tr>
<td>Browser, React Native, &amp; NodeJS</td>
<td align="center"><a href="https://textileio.github.io/js-threads">js-threads</a></td>
<td align="center"><a href="https://textileio.github.io/js-hub">js-hub</a></td>
</tr>
<tr>
<td>Golang Libraries</td>
<td align="center"><a href="https://godoc.org/github.com/textileio/go-threads/api/client">go-threads</a></td>
<td align="center"></td>
</tr>
<tr>
<td>Command-line</td>
<td align="center"><em>thread-shell (coming)</em></td>
<td align="center"><a href="../cli/hub/">Hub CLI</a></td>
</tr>
</tbody>
</table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../accounts/" title="Accounts" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Accounts
              </span>
            </div>
          </a>
        
        
          <a href="../cli/hub/" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; Textile
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://textile.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/textileio" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/textileio" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://blog.textile.io/" class="md-footer-social__link fa fa-medium"></a>
    
      <a href="https://slack.textile.io" class="md-footer-social__link fa fa-slack"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.12aa63bf.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
        <script src="../../js/sidebar.js"></script>
      
        <script src="../../search/main.js"></script>
      
    
  </body>
</html>