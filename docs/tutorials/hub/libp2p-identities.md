# Basic identity

In this tutorial, you'll learn how to generate private-keys user identities in your app.

## Generating an identity

You can use any private-key derived identity for your users. In this example, we'll use a key-pair generated by the [Libp2p](https://libp2p.io) Crypto library and made available through the `@textile/threads-core` library.

**Install dependency**

```bash
npm install --save @textile/threads-core
```

**Generating Identities**

You can use the `Libp2pCryptoIdentity` utility to generate random new identities or restore identities from their private key string.

```typescript
import {Libp2pCryptoIdentity} from '@textile/threads-core';

/** Random new identity */
const identity = await Libp2pCryptoIdentity.fromRandom()

/** Convert to string. */
const identityString = identity.toString()

/** Restore an identity object from a string */
const restored = Libp2pCryptoIdentity.fromString(identityString)
```

All of the instances above represent the same user generated by `fromRandom()`. Each one contains the user's private-key and therefore should remain private between your app and your user.

## Caching user identity

You can add simple client-side caching to store a user's identity in the browser and restore it when the user returns to the app.

!!!warning
    `localStorage` isn't guaranteed and may be cleared by the browser, the system, or the users. You should provide alternative storage mechanisms if maintaining identity (and therefore data ownership and access) over time is important.

```typescript
import {Libp2pCryptoIdentity} from '@textile/threads-core';

const getIdentity = async (): Promise<Libp2pCryptoIdentity> => {
  /** Restore any cached user identity first */
  const cached = localStorage.getItem("user-private-identity")
  if (cached !== null) {
    /** Convert the cached identity string to a Libp2pCryptoIdentity and return */
    return Libp2pCryptoIdentity.fromString(cached)
  }
  /** No cached identity existed, so create a new one */
  const identity = await Libp2pCryptoIdentity.fromRandom()
  /** Add the string copy to the cache */
  localStorage.setItem("identity", identity.toString())
  /** Return the random identity */
  return identity
}
```

## Signing transactions

The `Libp2pCryptoIdentity` object contains a signing method, allowing your app to now sign arbitrary bytes for your users. 

```typescript
import {Libp2pCryptoIdentity} from '@textile/threads-core';

const identity = await getIdentity();

const challenge = Buffer.from('Sign this string');

const signed = identity.sign(challenge);
```

<br />